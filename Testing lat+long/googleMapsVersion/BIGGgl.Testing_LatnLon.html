<!DOCTYPE html>
<!swap all 'getCurrentPosition' with 'watchPosition'>


<html>
<title>
    TESTingL n Lon
</title>

<body>
    <script src="jquery.js"></script>
    <script src="http://maps.google.com/maps/api/js?key=AIzaSyC23tLDaC-xc7rCmcKlJSvPXXqTcMAsQ9Y"></script>

    <p>Click the button to get your lat + lon.</p>

    <button onclick=" positionFunc() ">Find Ur Position using a Map</button>


    <!--This returns latitude(lat) and longitude(lon).And prints it-->
    <script>
        // attempts to store lat and long into a format that can be used
        /* Stores lat and lon as global variables so that we can manipulate them
        */
        var lat = 0;
        var lon = 0;

        // Function retrives lat + lon and calls printLat. getCurrentPosition has 2 calls. 1st is on success.2nd is on failure.
        function positionFunc() {
            navigator.geolocation.getCurrentPosition(success, failure);
        }
        function failure() {
            $('#lat').html("<p>Unable to get location! R u connected to the net? Orusing a bad browser?</p>");
        }
        // changes global variable lat and lon
        function success(position) {
            lat = position.coords.latitude;
            lon = position.coords.longitude;
            $('#lat').html(lat)
            $('$lon').html(lon)
            //Google - API - ready lat long string//
        }
        var map;
        function initialize() {
            var coords = new google.maps.LatLng(-37.9132483, 145.132655);

            var mapOptions = {
                zoom: 16,
                centre: coords,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
            };
            map = new google.maps.Map(document.getElementById('map'), mapOptions);

            var marker = new google.maps.Marker({ position: coords, map: map });

            var infowindow = new google.maps.InfoWindow({
                content: '<p>Marker Location:' + marker.getPosition() + '</p>'
            });

            google.maps.event.addListener(marker, 'click', function () {
                infowindow.open(map, marker);
            });
        }
        google.maps.event.addDomListener(window, 'load', initialize);

    </script>


    <style>
        #map {
            width: 600px;
            height: 400px;
        }
    </style>
</body>
<div id="lat "></div>
<div id="lon "></div>
<div id="map"></div>

</html>